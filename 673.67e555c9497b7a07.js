"use strict";(self.webpackChunksap_calculator=self.webpackChunksap_calculator||[]).push([[673],{4673(R,g,i){i.d(g,{ReportABugComponent:()=>C});var p=i(9769),m=i(6980),r=i(5119),f=i(3446),c=i(375),e=i(5547);const b=o=>["form-group","mb-3",o];function h(o,d){if(1&o&&(e.j41(0,"div",9),e.EFF(1),e.k0s()),2&o){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.errorMessage," ")}}function v(o,d){if(1&o){const t=e.RV6();e.j41(0,"div")(1,"p"),e.EFF(2," A shareable link of the current calculator will automatically be sent to the developer. Please make sure the calculator is currently relevant to the bug you are reporting. Provide a description of the bug below. (Player should have won, pet's ability is wrong, etc.) Name is optional. Provide your Discord ID if you want me to follow up with you. "),e.k0s(),e.j41(3,"div",1)(4,"div",2)(5,"label",3),e.EFF(6,"Name/Alias/Discord ID"),e.k0s(),e.nrm(7,"input",4),e.k0s(),e.j41(8,"div")(9,"label",5),e.EFF(10,"Description"),e.k0s(),e.nrm(11,"textarea",6),e.k0s()(),e.DNE(12,h,2,1,"div",7),e.j41(13,"button",8),e.bIt("click",function(){c.eBV(t);const a=e.XpG();return c.Njj(a.submit())}),e.EFF(14,"Submit"),e.k0s()()}if(2&o){const t=e.XpG();e.R7$(3),e.Y8G("ngClass",e.eq3(3,b,t.submitted?"was-validated":""))("formGroup",t.formGroup),e.R7$(9),e.Y8G("ngIf",t.errorMessage)}}function E(o,d){if(1&o){const t=e.RV6();e.j41(0,"div")(1,"h1"),e.EFF(2,"Thank you for the bug report!"),e.k0s(),e.j41(3,"button",8),e.bIt("click",function(){c.eBV(t);const a=e.XpG();return c.Njj(a.back())}),e.EFF(4," Report another bug :( "),e.k0s()()}}let C=(()=>{class o{http;calcFormGroup;formGroup=new r.gE({name:new r.MJ(""),description:new r.MJ(null,r.k0.required)});reported=!1;submitted=!1;errorMessage="";constructor(t){this.http=t}ngOnInit(){}submit(){if(this.submitted=!0,this.errorMessage="",this.formGroup.invalid)return;let t;try{const u=(0,f.A)(this.calcFormGroup.value),y=[...u.playerPets||[],...u.opponentPets||[]];for(const n of y)if(n&&(delete n.parent,delete n.logService,delete n.abilityService,delete n.gameService,delete n.petService,n.equipment)){const _="string"==typeof n.equipment?n.equipment:n.equipment.name;n.equipment=_?{name:_}:null}const D=JSON.stringify(u);t=`http://localhost:4200/?c=${encodeURIComponent(D)}`}catch(l){console.error("Error creating bug report data:",l),t="Error: Could not generate shareable link"}let s={...this.formGroup.value,link:t};const a=new m.Lr({"Content-Type":"application/json"});this.http.post("https://formspree.io/f/mgvzngzp",{name:"SAP CALC",replyto:"Ruihan20080129@gmail.com",message:s},{headers:a}).subscribe(l=>{console.log("Bug report submitted successfully:",l),this.reported=!0},l=>{console.error("Error submitting bug report:",l),this.errorMessage="Failed to submit bug report. Please try again or contact the developer directly."})}back(){this.formGroup.reset(),this.submitted=!1,this.reported=!1,this.errorMessage=""}static \u0275fac=function(s){return new(s||o)(e.rXU(m.Qq))};static \u0275cmp=e.VBU({type:o,selectors:[["app-report-a-bug"]],inputs:{calcFormGroup:"calcFormGroup"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"ngClass","formGroup"],[1,"mb-3"],["for","name"],["type","text","id","name","formControlName","name",1,"form-control"],["for","description"],["rows","3","formControlName","description","required","",1,"form-control"],["class","text-danger mb-2",4,"ngIf"],[1,"btn","btn-primary",3,"click"],[1,"text-danger","mb-2"]],template:function(s,a){1&s&&e.DNE(0,v,15,5,"div",0)(1,E,5,0,"div",0),2&s&&(e.Y8G("ngIf",!a.reported),e.R7$(),e.Y8G("ngIf",a.reported))},dependencies:[p.MD,p.YU,p.bT,r.X1,r.me,r.BC,r.cb,r.YS,r.j4,r.JD],encapsulation:2})}return o})()}}]);