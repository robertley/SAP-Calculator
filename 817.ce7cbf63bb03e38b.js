"use strict";(self.webpackChunksap_calculator=self.webpackChunksap_calculator||[]).push([[817],{6817(f,i,a){a.d(i,{ExportCalculatorComponent:()=>m});var p=a(9769),s=a(3446),r=a(5547),u=a(3077);let m=(()=>{class l{localStorageService;formGroup;constructor(t){this.localStorageService=t}ngOnInit(){}formGroupValueString(){if(!this.formGroup)return"";try{const o=(0,s.A)(this.formGroup.value),n=[...o.playerPets||[],...o.opponentPets||[]];for(const e of n)if(e&&(delete e.parent,delete e.logService,delete e.abilityService,delete e.gameService,delete e.petService,e.equipment)){const c="string"==typeof e.equipment?e.equipment:e.equipment.name;e.equipment=c?{name:c}:null}return JSON.stringify(o,null,2)}catch(t){return console.error("Error creating export string:",t),"Error: Could not generate the export data."}}copyToClipboard(){this.localStorageService.setFormStorage(this.formGroup);const t=this.formGroupValueString();t.startsWith("Error:")?alert("Failed to export"):navigator.clipboard.writeText(t).then(()=>{alert("Copied to clipboard")}).catch(o=>{console.error("Clipboard error:",o),alert("Failed to copy to clipboard.")})}static \u0275fac=function(o){return new(o||l)(r.rXU(u.s))};static \u0275cmp=r.VBU({type:l,selectors:[["app-export-calculator"]],inputs:{formGroup:"formGroup"},decls:4,vars:1,consts:[[1,"form-group"],["id","calcCode","rows","8","readonly","",1,"form-control","mb-2","calc-textarea",3,"value"],[1,"btn","btn-primary",3,"click"]],template:function(o,n){1&o&&(r.rj2(0,"div",0),r.Hgh(1,"textarea",1),r.rj2(2,"button",2),r.VwU("click",function(){return n.copyToClipboard()}),r.EFF(3," Copy to Clipboard "),r.eux()()),2&o&&(r.R7$(),r.Avn("value",n.formGroupValueString()))},dependencies:[p.MD],styles:[".calc-textarea[_ngcontent-%COMP%]{min-height:180px;font-family:Courier New,Courier,monospace;white-space:pre;overflow-wrap:normal;overflow:auto;resize:vertical}"]})}return l})()}}]);