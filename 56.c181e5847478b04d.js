"use strict";(self.webpackChunksap_calculator=self.webpackChunksap_calculator||[]).push([[56],{56(d,i,a){a.d(i,{ExportCalculatorComponent:()=>h});var c=a(9769),l=a(7033),t=a(5547),u=a(4937);function p(o,n){1&o&&(t.j41(0,"div",8),t.EFF(1," Compressed export code. Paste this into Import to restore the calculator. "),t.k0s())}function m(o,n){1&o&&(t.j41(0,"div",8),t.EFF(1," Legacy JSON export. Paste this into Import to restore the calculator. "),t.k0s())}function g(o,n){if(1&o&&(t.j41(0,"div",9),t.EFF(1),t.k0s()),2&o){const e=t.XpG();t.Y8G("ngClass","success"===e.statusTone?"text-success":"text-danger"),t.R7$(),t.SpI(" ",e.statusMessage," ")}}let h=(()=>{class o{localStorageService;formGroup;exportFormat="compressed";statusMessage="";statusTone="success";statusTimer=null;constructor(e){this.localStorageService=e}ngOnInit(){}get isLegacyJsonExport(){return"legacyJson"===this.exportFormat}onExportFormatChange(e){const r=e.target;this.exportFormat=r?.checked?"legacyJson":"compressed"}formGroupValueString(){if(!this.formGroup)return"";try{return(0,l.$j)(this.formGroup,this.exportFormat)}catch(e){return console.error("Error creating export string:",e),"Error: Could not generate the export data."}}copyToClipboard(){this.localStorageService.setFormStorage(this.formGroup),this.clearStatus();const e=this.formGroupValueString();e.startsWith("Error:")?this.setStatus("Failed to export.","error"):navigator.clipboard.writeText(e).then(()=>{this.setStatus("Copied to clipboard.","success")}).catch(r=>{console.error("Clipboard error:",r),this.setStatus("Failed to copy to clipboard.","error")})}clearStatus(){this.statusTimer&&(clearTimeout(this.statusTimer),this.statusTimer=null),this.statusMessage=""}setStatus(e,r){this.statusMessage=e,this.statusTone=r,this.statusTimer&&clearTimeout(this.statusTimer),this.statusTimer=setTimeout(()=>{this.statusMessage="",this.statusTimer=null},3e3)}static \u0275fac=function(r){return new(r||o)(t.rXU(u.s))};static \u0275cmp=t.VBU({type:o,selectors:[["app-export-calculator"]],inputs:{formGroup:"formGroup"},decls:11,vars:5,consts:[[1,"form-group"],[1,"form-check","form-switch","mb-2"],["id","legacyJsonExportToggle","type","checkbox",1,"form-check-input",3,"change","checked"],["for","legacyJsonExportToggle",1,"form-check-label"],["class","text-muted mb-2",4,"ngIf"],["id","calcCode","rows","8","readonly","",1,"form-control","mb-2","calc-textarea",3,"value"],[1,"btn","btn-primary",3,"click"],["class","mt-2",3,"ngClass",4,"ngIf"],[1,"text-muted","mb-2"],[1,"mt-2",3,"ngClass"]],template:function(r,s){1&r&&(t.j41(0,"div",0)(1,"div",1)(2,"input",2),t.bIt("change",function(f){return s.onExportFormatChange(f)}),t.k0s(),t.j41(3,"label",3),t.EFF(4," Use legacy .json export format "),t.k0s()(),t.DNE(5,p,2,0,"div",4)(6,m,2,0,"div",4),t.nrm(7,"textarea",5),t.j41(8,"button",6),t.bIt("click",function(){return s.copyToClipboard()}),t.EFF(9," Copy to Clipboard "),t.k0s(),t.DNE(10,g,2,2,"div",7),t.k0s()),2&r&&(t.R7$(2),t.Y8G("checked",s.isLegacyJsonExport),t.R7$(3),t.Y8G("ngIf",!s.isLegacyJsonExport),t.R7$(),t.Y8G("ngIf",s.isLegacyJsonExport),t.R7$(),t.Y8G("value",s.formGroupValueString()),t.R7$(3),t.Y8G("ngIf",s.statusMessage))},dependencies:[c.MD,c.YU,c.bT],styles:[".calc-textarea[_ngcontent-%COMP%]{min-height:180px;font-family:Courier New,Courier,monospace;white-space:pre;overflow-wrap:normal;overflow:auto;resize:vertical}"]})}return o})()}}]);