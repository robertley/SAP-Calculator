"use strict";(self.webpackChunksap_calculator=self.webpackChunksap_calculator||[]).push([[56],{10056(f,l,s){s.d(l,{ExportCalculatorComponent:()=>h});var n=s(49769),i=s(57033),p=s(54205),t=s(35547),u=s(44937);function m(e,c){1&e&&(t.j41(0,"div",8),t.EFF(1," Compressed export code. Paste this into Import to restore the calculator. "),t.k0s())}function _(e,c){1&e&&(t.j41(0,"div",8),t.EFF(1," Legacy JSON export. Paste this into Import to restore the calculator. "),t.k0s())}function g(e,c){if(1&e&&(t.j41(0,"div",9),t.EFF(1),t.k0s()),2&e){const o=t.XpG();t.Y8G("ngClass","success"===o.statusTone?"text-success":"text-danger"),t.R7$(),t.SpI(" ",o.statusMessage," ")}}let h=(()=>{class e{localStorageService;formGroup;exportFormat="compressed";statusMessage="";statusTone="success";statusController=new p.G(o=>{this.statusMessage=o},o=>{this.statusTone=o});constructor(o){this.localStorageService=o}ngOnInit(){}ngOnDestroy(){this.statusController.dispose()}get isLegacyJsonExport(){return"legacyJson"===this.exportFormat}onExportFormatChange(o){const r=o.target;this.exportFormat=r?.checked?"legacyJson":"compressed"}formGroupValueString(){if(!this.formGroup)return"";try{return(0,i.$j)(this.formGroup,this.exportFormat)}catch(o){return console.error("Error creating export string:",o),"Error: Could not generate the export data."}}copyToClipboard(){this.localStorageService.setFormStorage(this.formGroup),this.clearStatus();const o=this.formGroupValueString();o.startsWith("Error:")?this.setStatus("Failed to export.","error"):navigator.clipboard.writeText(o).then(()=>{this.setStatus("Copied to clipboard.","success")}).catch(r=>{console.error("Clipboard error:",r),this.setStatus("Failed to copy to clipboard.","error")})}clearStatus(){this.statusController.clear()}setStatus(o,r){this.statusController.set(o,r)}static \u0275fac=function(r){return new(r||e)(t.rXU(u.s))};static \u0275cmp=t.VBU({type:e,selectors:[["app-export-calculator"]],inputs:{formGroup:"formGroup"},decls:11,vars:5,consts:[[1,"form-group"],[1,"form-check","form-switch","mb-2"],["id","legacyJsonExportToggle","type","checkbox",1,"form-check-input",3,"change","checked"],["for","legacyJsonExportToggle",1,"form-check-label"],["class","text-muted mb-2",4,"ngIf"],["id","calcCode","rows","8","readonly","",1,"form-control","mb-2","calc-textarea",3,"value"],[1,"btn","btn-primary",3,"click"],["class","mt-2",3,"ngClass",4,"ngIf"],[1,"text-muted","mb-2"],[1,"mt-2",3,"ngClass"]],template:function(r,a){1&r&&(t.j41(0,"div",0)(1,"div",1)(2,"input",2),t.bIt("change",function(C){return a.onExportFormatChange(C)}),t.k0s(),t.j41(3,"label",3),t.EFF(4," Use legacy .json export format "),t.k0s()(),t.DNE(5,m,2,0,"div",4)(6,_,2,0,"div",4),t.nrm(7,"textarea",5),t.j41(8,"button",6),t.bIt("click",function(){return a.copyToClipboard()}),t.EFF(9," Copy to Clipboard "),t.k0s(),t.DNE(10,g,2,2,"div",7),t.k0s()),2&r&&(t.R7$(2),t.Y8G("checked",a.isLegacyJsonExport),t.R7$(3),t.Y8G("ngIf",!a.isLegacyJsonExport),t.R7$(),t.Y8G("ngIf",a.isLegacyJsonExport),t.R7$(),t.Y8G("value",a.formGroupValueString()),t.R7$(3),t.Y8G("ngIf",a.statusMessage))},dependencies:[n.MD,n.YU,n.bT],styles:[".calc-textarea[_ngcontent-%COMP%]{min-height:180px;font-family:Courier New,Courier,monospace;white-space:pre;overflow-wrap:normal;overflow:auto;resize:vertical}"]})}return e})()}}]);